import base64
from PIL import Image
import io

def save_image_from_base64(base64_string, output_path):
    try:
        # Разделение строки base64 на формат и данные
        format, imgstr = base64_string.split(';base64,')
        img_data = base64.b64decode(imgstr)  # Декодирование base64

        # Определение расширения
        ext = format.split('/')[-1]
        
        # Открытие изображения
        image = Image.open(io.BytesIO(img_data))
        
        # Сохранение изображения
        image.save(output_path, format=ext.upper())
        print(f"Image saved successfully to {output_path}")
    except Exception as e:
        print(f"Error: {str(e)}")

# Пример строки base64
base64_string = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/..."
save_image_from_base64(base64_string, "output_image.jpg")
